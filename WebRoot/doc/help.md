<a href="../download/AP.pdf" download="《用户手册》.pdf" style="display: block;text-align:right;">
<img border="0" src="../images/helpdoc/SVG/downloadpdf.svg" alt="下载pdf">
</a>

**用 户 手 册**

**目 录**

[第1章 系统介绍](#第1章系统介绍)

>   [1.1 环境要求](#1.1环境要求)

>   [1.2 系统安装](#1.2系统安装)

>   [1.3 系统配置](#1.3系统配置)

>   [1.4 界面配置](#1.4界面配置)

>   [1.4.1 登录界面](#1.4.1登录界面)

>   [1.4.2 主界面](#1.4.2主界面)

>   [1.5 操作流程](#1.5操作流程)

[第2章 应用介绍](#第2章应用介绍)

>   [2.1 页面布局](#2.1页面布局)

>   [2.2 实时监控](#2.2实时监控)

>   [2.2.1 状态统计](#2.2.1状态统计)

>   [2.2.2 设备概览](#2.2.2设备概览)

>   [2.2.3 实时曲线](#2.2.3实时曲线)

>   [2.2.4 实时数据](#2.2.4实时数据)

>   [2.2.5 设备信息](#2.2.5设备信息)

>   [2.2.6 设备控制](#2.2.6设备控制)

>   [2.2.7 资源监测](#2.2.7资源监测)

>   [2.3 历史查询](#2.3历史查询)

>   [2.3.1 设备统计](#2.3.1设备统计)

>   [2.3.2 设备列表](#2.3.2设备列表)

>   [2.3.3 历史曲线](#2.3.3历史曲线)

>   [2.3.4 历史数据列表](#2.3.4历史数据列表)

>   [2.4 故障查询](#2.4故障查询)

>   [2.4.1 通信状态报警](#2.4.1通信状态报警)

>   [2.4.2 数据量报警](#2.4.2数据量报警)

>   [2.4.3 枚举量报警](#2.4.3枚举量报警)

>   [2.4.4 开关量报警](#2.4.4开关量报警)

>   [2.5 日志查询](#2.5日志查询)

>   [2.5.1 设备日志](#2.5.1设备日志)

>   [2.5.2 系统日志](#2.5.2系统日志)

>   [2.6 权限管理](#2.6权限管理)

>   [2.6.1 单位管理](#2.6.1单位管理)

>   [2.6.2 角色管理](#2.6.2角色管理)

>   [2.6.3 用户管理](#2.6.3用户管理)

>   [2.7 驱动配置](#2.7驱动配置)

>   [2.7.1 驱动配置](#2.7.1驱动配置)

>   [2.7.2 单元配置-采控单元](#2.7.2单元配置-采控单元)

>   [2.7.3 单元配置-报警单元](#2.7.3单元配置-报警单元)

>   [2.7.4 实例配置-采控实例](#2.7.4实例配置-采控实例)

>   [2.7.5 实例配置-报警实例](#2.7.5实例配置-报警实例)

>   [2.7.6 实例配置-短信实例](#2.7.6实例配置-短信实例)

>   [2.8 设备管理](#2.8设备管理)

>   [2.8.1 泵设备](#2.8.1泵设备)

>   [2.8.2 管设备](#2.8.2管设备)

>   [2.8.3 辅件设备](#2.8.3辅件设备)

>   [2.9 系统配置](#2.9系统配置)

>   [2.9.1 模块配置](#2.9.1模块配置)

>   [2.9.2 字典配置](#2.9.2字典配置)

>   [2.9.3 报警颜色](#2.9.3报警颜色)

## <h1><a name="第1章系统介绍"></a>第1章 系统介绍</h1>  

## <h2><a name="1.1环境要求"></a>1.1 环境要求</h2>

CPU：2核及以上

内存：8G及以上

硬盘：1T及以上

操作系统：建议Windows server 2012 64位及以上（推荐：Windows server 2019）

数据库：Oracle 12g及以上

JDK：8.0及以上

Tomcat：9.0及以上

## <h2><a name="1.2系统安装"></a>1.2 系统安装</h2>

1、正确安装并配置jdk(版本：1.8)、tomcat(版本：9.0)、oracle(版本：12g及以上)。

注意：随着系统的运行，oracle的日志文件会越来越大，当达到4G时，会影响到数据库的正常运行，可以选择关闭oracle日志文件的生成，操作方法如下。

运行“cmd”，打开命令窗口，依次执行以下命令进行关闭oracle日志操作：

1）lsnrctl

2）set log_status off

3）save_config

4）show log_status

![](../images/helpdoc/PNG/1ddd3ebcef28e66a22327ee0f124a801.png)

2、创建数据库

1）打开《数据库》文件夹下《createDB》文件夹，打开1、createSpaceAndUser.sql文件，按照实际情况修改其中表空间及用户的信息

![](../images/helpdoc/PNG/962fdcf45a7aa42a017004a28706c5f1.png)

2）编辑批处理文件autorun.bat中的数据库连接信息，保存关闭后执行，执行完毕后按任意键退出，数据库创建完毕

![](../images/helpdoc/PNG/26771336847ea4e849abb9e10e4db134.png)

1.  管理员用户名/密码@数据库实例名

2.  自建的用户名/密码@数据库实例名

3、软件部署：打开
“1、软件”目录，将《ad.exe》程序拷贝到服务器中（路径自定义）；将《ap\_fb.rar》解压到tomcat安装目录\\webapps文件夹下。

4、端口开放

必开放端口，如有改变按实际情况执行：

1）16100：平台web访问端口；

2）19100：驱动程序主站端口，用于设备连接；

3）19200：驱动程序端口；

4）报警邮件发送账号所在邮件服务器的SMTP端口，以实际为准。

可开放端口，如有改变按实际情况执行

1）3389：远程桌面连接端口

2）1521：oracle数据库端口

## <h2><a name="1.3系统配置"></a>1.3 系统配置</h2>

同步修改tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\config\\config.yml和tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\classes\\config\\config.yml文件，配置项如下：

1、软件访问路径配置

>   ![](../images/helpdoc/PNG/c3cc269d8a2ba38522e68f700e1c1676.png)

2、数据库连接配置

![](../images/helpdoc/PNG/2156793d7cfb6ae206a7416167ceca78.png)

一般只需修改IP、端口、数据库实例名、用户名、密码即可。

注意：对于oracle12c及以上版本，端口后是”/”，而不是”:”，如jdbc:oracle:thin:@127.0.0.1:1521/orcl

3、驱动程序路径配置，只需将IP修改位驱动程序所在服务器IP即可

![](../images/helpdoc/PNG/722ac03e9e876f5e89284b36c6ecc0d6.png)

4、邮件发送账号配置

![](../images/helpdoc/PNG/8b798b6e460f74782e31088af5996a3b.png)

发送邮件的账号需要开启SMTP服务，并记录开通后生成的授权码或者独立密码。

account：邮件账号；

password：邮件授权码或独立密码；

smtpHost：邮件服务器地址，不同服务器地址不同；

smtpPort：邮箱SMTP端口，以实际为准，该端口需要开放。

5、配置完成成后，启动驱动程序，启动tomcat。启动后，打开浏览器，访问并登录软件，按照1.5节说明进行操作；如需修改软件名称、界面风格，请参考1.4节。

## <h2><a name="1.4界面配置"></a>1.4 界面配置</h2>

先停止tomcat（如果正在运行），配置完成后再启动。如果配置未生效，需要清理浏览器缓存。

### <h3><a name="1.4.1登录界面"></a>1.4.1 登录界面</h3>

![](../images/helpdoc/PNG/ffc5d57a0cfcf1391dfc09c966767fe1.png)

1、软件名称配置

同步修改tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\config\\config.yml和tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\classes\\config\\config.yml文件

![](../images/helpdoc/PNG/9028ca4a86e82ad485c572979fd90184.png)

2、软件简介配置

同步修改tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\config\\config.yml和tomcat安装目录\\webapps\\ap\_fb\\WEB-INF\\classes\\config\\config.yml文件

![](../images/helpdoc/PNG/a1bc55899dca807f9667c6cbfdadcf66.png)

3、背景图片

替换tomcat安装目录\\webapps\\ap\_fb\\images路径下“login.jpg”图片，图片分辨率1920\*1000。修改后如未生效，需要清理浏览器缓存。

### <h3><a name="1.4.2主界面"></a>1.4.2 主界面</h3>

![](../images/helpdoc/PNG/71e2ec150dfcaf6bb7f7cdc20a6ad391.png)

1、banner背景色

背景为从左到右渐变，修改tomcat安装目录\\webapps\\ap\_fb\\styles\\banner.css文件：

![](../images/helpdoc/PNG/20fd2b56a3799adca072231c4e54e560.png)

修改后如未生效，需要清理浏览器缓存。

（1）、底部边框

图中：2px-宽度，solid-线型为实线，\#FBC02D-边框颜色金色

（2）、背景色

图中配置效果为从左到右渐变，\#006093-左侧颜色，\#0079A8-中间颜色，\#018AB9-右侧颜色。

2、图标：

（1）、替换tomcat安装目录\\webapps\\ap\_fb\\images\\logo路径下“logo.jpg”图片，图片分辨率956\*921；

（2）、替换tomcat安装目录\\webapps\\ap\_fb\\images\\logo路径下“favicon.ico”图片，图片分辨率16\*16。

3、软件名称

修改名称：见1.4.1节软件名称配置部分；

修改名称样式：修改tomcat安装目录\\webapps\\ap\_fb\\styles\\banner.css文件，修改后如未生效，需要清理浏览器缓存。

![](../images/helpdoc/PNG/0a06e340aa355e99a04cc7323f91e788.png)

（1）、字体颜色；

（2）、bold-加粗，23px/50%-字体大小/行高，微软雅黑-字体；

（3）、距左侧距离，如果图标大小改变，则需要修改此处；

（4）、字体阴影，图中配置效果为：水平1px，竖直1px，模糊距离0px，阴影颜色白色。

4、修改密码按钮样式

修改tomcat安装目录\\webapps\\ap\_fb\\styles\\banner.css文件，修改后如未生效，需要清理浏览器缓存。

![](../images/helpdoc/PNG/00fb5abf529a3276911106f387837fe7.png)

（1）图标：替换tomcat安装目录\\webapps\\ap\_fb\\images路径下“password.svg”图片；

（2）距右侧距离；

（3）字体颜色-白色；

（4）字体：bold-加粗，13px/50%-字体大小/行高，微软雅黑-字体

5、退出按钮样式

修改tomcat安装目录\\webapps\\ap\_fb\\styles\\banner.css文件，修改后如未生效，需要清理浏览器缓存。

![](../images/helpdoc/PNG/2aeb23c932a94d25b06bb0ec33bfae3f.png)

（1）图标：替换tomcat安装目录\\webapps\\ap\_fb\\images路径下“exit.svg”图片；

（2）距右侧距离；

（3）字体颜色-白色；

（4）字体：bold-加粗，13px/50%-字体大小/行高，微软雅黑-字体

6、帮助按钮样式

修改tomcat安装目录\\webapps\\ap\_fb\\styles\\banner.css文件，修改后如未生效，需要清理浏览器缓存。

![](../images/helpdoc/PNG/d030d0b26048913b8192957d27206752.png)

（1）图标：替换tomcat安装目录\\webapps\\ap\_fb\\images路径下“help.svg”图片；

（2）距右侧距离；

（3）字体颜色-白色；

（4）字体：bold-加粗，13px/50%-字体大小/行高，微软雅黑-字体

## <h2><a name="1.5操作流程"></a>1.5 操作流程</h2>

系统部署完成后需要根据使用者实际情况进行数据配置，流程如下：

1、输入默认的软件管理员账号进入系统；

2、“单位管理”模块创建单位信息，**详情查看2.6.1节**；

3、“角色管理”模块创建单位信息，**详情查看2.6.2节**；

4、“用户管理”模块为单位创建用户，**详情查看2.6.3节**；

5、“驱动配置”模块配置协议或者对接数据库的信息，**详情查看2.7节**；

6、“设备管理”模块录入设备信息，**详情查看2.8节**；

## <h1><a name="第2章应用介绍"></a>第2章 应用介绍</h1>

浏览器要求：建议谷歌浏览器、360浏览器极速模式、IE9以上版本。

## <h2><a name="2.1页面布局"></a>2.1 页面布局</h2>

1、banner区：包括修改密码、退出、帮助及全屏按钮；

2、功能导航区：系统各主功能模块；

3、组织导航区：用户组织结构；

4、模块详细功能。

通过点击界面中缝位置的图标![G:\\work\\github\\apmd\\Image\\PNG\\025.png](../images/helpdoc/PNG/31c6015dc83f2a40f02cd33a2419f5a9.png)或![G:\\work\\github\\apmd\\Image\\PNG\\026.png](../images/helpdoc/PNG/74e5710c75eecf890973c56e5ba93a49.png)可实现界面伸缩。

![](../images/helpdoc/PNG/9c906f38ae5f1b6a4900976c83888869.png)

图2-1 界面概览

## <h2><a name="2.2实时监控"></a>2.2 实时监控</h2>

根据设备数据进行实时监控，**有新数据时，界面自动刷新。**

![](../images/helpdoc/PNG/d040c2242dc8a75fb3b11209c5578ea1.png)

图2-2 实时监控

### <h3><a name="2.2.1状态统计"></a>2.2.1 状态统计</h3>

设备统计包括通信状态统计和设备类型统计，点击饼图相应部分可对设备进行筛选。

![](../images/helpdoc/PNG/3ced97253db725db6e250d116bc85b0c.png)

图2-3 实时监控-通信状态统计饼图

![](../images/helpdoc/PNG/7bf0f794a0a7754d456fae62ce1ba92b.png)

图2-4 实时监控-设备类型统计饼图

### <h3><a name="2.2.2设备概览"></a>2.2.2 设备概览</h3>

显示设备列表及最新采集数据，动态实时刷新，并可将数据导出。

![](../images/helpdoc/PNG/6a59f08ac137768f85d5405378fadca0.png)

图2-5 实时监控-设备概览

### <h3><a name="2.2.3实时曲线"></a>2.2.3 实时曲线</h3>

实时曲线，动态实时刷新。显示的曲线可在驱动配置-单元配置-采控单元中配置。实时曲线只能查看当天数据，可点击时间区域显示对应曲线。

![](../images/helpdoc/PNG/8b958843251fe107196c6d6598668190.png)

图2-6 实时监控-实时曲线

### <h3><a name="2.2.4实时数据"></a>2.2.4 实时数据</h3>

显示概览表中所选设备的实时数据及报警，动态实时刷新。

![](../images/helpdoc/PNG/b9b6e98ac932860a2944155dbd092e16.png)

图2-7 实时监控-实时数据

### <h3><a name="2.2.5设备信息"></a>2.2.5 设备信息</h3>

显示设备附加信息以及辅件信息。

设备附加信息：在设备管理部分录入

![](../images/helpdoc/PNG/8984469c5cb07db287bb6cf1bb13503a.png)

图2-8 实时监控-设备信息

辅件设备：在辅件设备管理中录入，并在相应的设备管理模块中配置主设备所具备的辅件设备。

![](../images/helpdoc/PNG/4ed9b975458f18e48d91b8bfa754eade.png)

图2-9 实时监控-辅件设备

### <h3><a name="2.2.6设备控制"></a>2.2.6 设备控制</h3>

根据设备配置的采控数据，动态显示控制项，点击按钮进行相应的控制。

**注意：当前登录用户拥有控制权限且目标设备在线时，才可进行控制**。

![](../images/helpdoc/PNG/c97b7887e4231b510017407f79e653bf.png)

图2-10 实时监控-设备控制

### <h3><a name="2.2.7资源监测"></a>2.2.7 资源监测</h3>

实时监测服务器的CPU、内存使用情况，数据库表空间使用率以及驱动程序运行状态和版本信息，点击可查看历史曲线。

![](../images/helpdoc/PNG/b2c109baea417c219f6d310d26241189.png)

图2-11 实时监控-资源监测

## <h2><a name="2.3历史查询"></a>2.3 历史查询</h2>

查询设备历史数据

![](../images/helpdoc/PNG/2b3e9e566101d9f2a39858a5c12fd9e9.png)

图2-12 历史查询

### <h3><a name="2.3.1设备统计"></a>2.3.1 设备统计</h3>

设备统计包括通信状态统计和设备类型统计，点击饼图相应部分可对设备进行筛选。

![](../images/helpdoc/PNG/3ced97253db725db6e250d116bc85b0c.png)

图2-13 实时监控-通信状态统计饼图

![](../images/helpdoc/PNG/7bf0f794a0a7754d456fae62ce1ba92b.png)

图2-14 实时监控-设备类型统计饼图

### <h3><a name="2.3.2设备列表"></a>2.3.2 设备列表</h3>

显示设备列表以及当前通信状态和最新数据的采集时间。

![](../images/helpdoc/PNG/cdb5cd3a1947835a433b0747c3237a50.png)

图2-15 历史查询-设备列表

### <h3><a name="2.3.3历史曲线"></a>2.3.3 历史曲线</h3>

显示设备列表中所选设备的历史曲线，当历史数据记录数大于500时，显示数据抽稀后的曲线。

![](../images/helpdoc/PNG/b9d30538d8d54f5e063412786b46e33f.png)

图2-16 历史查询-历史曲线

### <h3><a name="2.3.4历史数据列表"></a>2.3.4 历史数据列表</h3>

显示设备列表所选设备的历史数据，表中为概览数据的历史，点击详细查看详细数据。

![](../images/helpdoc/PNG/12d1267e00745727f6b0f8c062a02ba5.png)

图2-17 历史查询-概览数据历史

![](../images/helpdoc/PNG/05d3a152def86b0c963bab73a05028fc.png)

图2-18 历史查询-详细数据

## <h2><a name="2.4故障查询"></a>2.4 故障查询</h2>

查询设备报警信息，包括通信状态报警、数据量报警、枚举量报警、开关量抱紧。

### <h3><a name="2.4.1通信状态报警"></a>2.4.1 通信状态报警</h3>

查询设备上线、离线报警数据。

![](../images/helpdoc/PNG/3e482db7111758dafb61e83c84b7e15f.png)

图2-19 故障查询-通信状态报警

### <h3><a name="2.4.2数据量报警"></a>2.4.2 数据量报警</h3>

查询设备数据量数据的报警信息。

![](../images/helpdoc/PNG/4ba53dcc32d97024c57e2205212c0cbf.png)

图2-20 故障查询-数据量报警

### <h3><a name="2.4.3枚举量报警"></a>2.4.3 枚举量报警</h3>

查询设备枚举量数据的报警信息。

![](../images/helpdoc/PNG/80627e88d0a3688c1205a978468b9a8d.png)

图2-21 故障查询-枚举量报警

### <h3><a name="2.4.4开关量报警"></a>2.4.4 开关量报警</h3>

查询设备开关量数据的报警信息。

![](../images/helpdoc/PNG/4111d68813e8d3d97dfd7296663f1085.png)

图2-22 故障查询-开关量报警

## <h2><a name="2.5日志查询"></a>2.5 日志查询</h2>

日志数据查询，包括设备日志和系统日志。

### <h3><a name="2.5.1设备日志"></a>2.5.1 设备日志</h3>

查询设备操作日志，如设备的添加、修改、删除和控制。

![](../images/helpdoc/PNG/b80fdd592a385ad6b5d69d55b5c4084a.png)

图2-23 日志查询-设备日志

### <h3><a name="2.5.2系统日志"></a>2.5.2 系统日志</h3>

查询用户登录时间、登录IP等。

![](../images/helpdoc/PNG/c331afe6b4b77768e9337aad37ce0747.png)

图2-24 日志查询-系统日志

## <h2><a name="2.6权限管理"></a>2.6 权限管理</h2>

系统部署完成后需要新建单位、用户并划分权限。

### <h3><a name="2.6.1单位管理"></a>2.6.1 单位管理</h3>

单位组织维护，创建及编辑组织树。

![](../images/helpdoc/PNG/93e2821f2b1e89b9f79fbc937003fbce.png)

图2-25 单位管理

#### <h4><a name="2.6.1.1单位创建"></a>2.6.1.1 单位创建</h4>

（1）点击“创建”按钮，创建油田公司。

上级单位：选择上级单位，无上级单位则选择“组织根节点”；

单位类别：按实际选择，如局级；

单位名称：油田公司；

单位编码、单位级别：确定上级单位、单位类别后自动生成；

单位说明：单位详细说明，可不填写。

填写完成后，点击“保存”按钮，完成创建。

![](../images/helpdoc/PNG/9bc08e7522383d0f7f46fcb9466580f2.png)

图2-26单位管理-单位创建

#### <h4><a name="2.6.1.2单位修改"></a>2.6.1.2 单位修改</h4>

选中要修改的组织，点击“修改”按钮（或者双击）打开修改窗口，编辑相应内容后，点击“修改”按钮，完成操作。

![](../images/helpdoc/PNG/4d92b18624be24a990ad8b850342dec6.png)

图2-27单位管理-单位修改

#### <h4><a name="2.6.1.3单位删除"></a>2.6.1.3 单位删除</h4>

勾选要删除的组织，点击“删除”按钮

![](../images/helpdoc/PNG/4ef572255effc5933a73a71da1b9e097.png)

图2-28 单位管理-单位删除

### <h3><a name="2.6.2角色管理"></a>2.6.2 角色管理</h3>

![](../images/helpdoc/PNG/d81640b524ef87e091a30f0e25787072.png)

图2-29 角色管理

#### <h4><a name="2.6.2.1角色创建"></a>2.6.2.1 角色创建</h4>

点击“创建”按钮，创建角色

角色名称：角色名称；

角色编码：角色的编码；

控制权限：角色是否具有设备控制权限；

接收报警短信：是否接收设备报警短信；

接收报警邮件：是否接收设备报警邮件；

数据显示级别：只能查看显示级别大于角色数据显示级别的数据项，对设备数据进行分级管理；

角色描述：角色信息描述；

![](../images/helpdoc/PNG/111edcc5287a371d58d8c8002edfa047.png)

图2-30 角色管理-角色创建

#### <h4><a name="2.6.2.2角色修改"></a>2.6.2.2 角色修改</h4>

选中要修改的角色，点击“修改”按钮（或者双击）打开修改窗口，编辑相应内容后，点击“修改”按钮，完成操作。

![](../images/helpdoc/PNG/7bde71cd740e93c30649e47df41abf22.png)

图2-31 角色管理-角色修改

#### <h4><a name="2.6.2.3角色删除"></a>2.6.2.3 角色删除</h4>

勾选要删除的角色，点击“删除”按钮

![](../images/helpdoc/PNG/facf48940b27dcd4f1333b6d9c048cd3.png)

图2-32 角色管理-角色删除

#### <h4><a name="2.6.2.4角色授权"></a>2.6.2.4 角色授权</h4>

选中要授权的角色，在右侧模块表中勾选要授予给角色的模块，点击“保存”。

![](../images/helpdoc/PNG/f07b14780a966ce0bfbffac23a42377d.png)

图2-33 角色管理-角色授权

### <h3><a name="2.6.3用户管理"></a>2.6.3 用户管理</h3>

#### <h4><a name="2.6.3.1用户创建"></a>2.6.3.1 用户创建</h4>

点击“创建”按钮，创建新用户。填写完成后，点击“保存”按钮，完成创建。

单位名称：选择用户所属组织；

角色：选择要授予的角色，则该用户获得所授予的角色具备的权限；

用户名称、用户账号、用户密码：按实际填写；

快捷登录：在登录界面是否可以免密登录，一般用于数据查询人员。

用户电话：用于接收报警短信；

内部邮箱：用于接收报警邮件；

![](../images/helpdoc/PNG/6bfc9823a7c8a8bfbaf098afa0a41f61.png)

图2-34 用户创建

#### <h4><a name="2.6.3.2用户修改"></a>2.6.3.2 用户修改</h4>

选中要修改的用户，点击“修改”按钮（或者双击）打开修改窗口，编辑相应内容后，点击“修改”按钮，完成操作。

#### <h4><a name="2.6.3.3用户删除"></a>2.6.3.3 用户删除</h4>

勾选要删除的用户，点击“删除”按钮。

## <h2><a name="2.7驱动配置"></a>2.7 驱动配置</h2>

包括协议配置、单元配置、实例配置。

### <h3><a name="2.7.1驱动配置"></a>2.7.1 驱动配置</h3>

![](../images/helpdoc/PNG/d7ec3e68d0f5c274a9c4e2f096e83751.png)

图2-35 协议配置配置

#### <h4><a name="2.7.1.1协议列表"></a>2.7.1.1 协议列表</h4>

第一层节点：协议所属设备类型，泵设备或管设备；

第二层节点：协议；

![](../images/helpdoc/PNG/e4b44cdf1d4a9b945cf03811c933ba3c.png)

图2-36 协议列表

#### <h4><a name="2.7.1.2协议属性"></a>2.7.1.2 协议属性</h4>

树形列表中所选协议的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/76206ee43252798df2ee3f9b50d17157.png)

图2-37协议属性窗口

#### <h4><a name="2.7.1.3协议地址配置"></a>2.7.1.3 协议地址配置</h4>

协议下具体地址配置，在此处进行添加（右键插入）、修改（单元格直接编辑）、删除（右键删除）。修改后点击保存按钮。（支持从excel中粘贴）

![](../images/helpdoc/PNG/971ed9de1863dc02cda67fb29fb34def.png)

图2-38 协议地址配置

名称：项名称；

地址：项起始地址；

数量：所配置的存储数据类型数量，如1个uint16；

存储数据类型：设备中存储该项数据的数据类型，包括：byte、int16（有符号16位整型）、uint16（无符号16位整型）、float32（32位浮点）、bcd（bcd码，时间一般配置为该类型）；

接口数据类型：上位机要解析成的数据类型，包括bool（布尔型）、int（整型）、float32（32位浮点）、float64（64位浮点）、string（字符串），位数组接口数据类型固定选择bool型；

单位：上位机解析后的单位（和界面显示一致）；

换算比例：存储数据\*换算比例=接口数据；

解析模式：数据量、枚举量、开关量；

采集模式：主动上传（设备主动上传）、被动相应（设备被动等待上位机读写）。

#### <h4><a name="2.7.1.4项含义配置"></a>2.7.1.4 项含义配置</h4>

枚举量：如变频器运行状态值对应的含义配置

![](../images/helpdoc/PNG/c035c2b084e96bf7078a139e003fd7ad.png)

图2-39 枚举量含义配置

开关量：如保护开关位数组，位所对应的开关状态

![](../images/helpdoc/PNG/4b3df05ec66b32085840649d4674f125.png)

图2-40 开关量位含义配置

数据量：如井口温度，将值-50设置为无效数据N/A

![](../images/helpdoc/PNG/84d38bbfff956511cda6efb04210e831.png)

图2-41 数据量显示转换配置

#### <h4><a name="2.7.1.5协议添加及删除"></a>2.7.1.5 协议添加及删除</h4>

1、协议添加

点击“添加协议”按钮，添加协议

![](../images/helpdoc/PNG/b32aa932605be8ba81ac7b630d8035d7.png)

图2-42 协议添加

协议添加后，再配置协议的地址信息。

2、协议删除

在协议列表中，选中要删除的协议，右键→删除协议。

![](../images/helpdoc/PNG/9350de51a0221ba293d418e308370495.png)

图2-43 协议删除

### <h3><a name="2.7.2单元配置-采控单元"></a>2.7.2 单元配置-采控单元</h3>

在协议下面创建采控单元，每个采控单元下面可以创建一个采集组和一个控制组，并勾选采集组和控制组包含的项。

![](../images/helpdoc/PNG/1e604fcbf65c769031e57c3c3ce5b5ae.png)

图2-44 采控单元

#### <h4><a name="2.7.2.1单元列表"></a>2.7.2.1 单元列表</h4>

第一层节点：设备类型，泵设备或管设备

第二层节点：协议；

第三层节点：采控单元；

第四层节点：采集组或者控制组；

![](../images/helpdoc/PNG/8848a6ea13ac660179a5e65d4d43f0ea.png)

图2-45 采控单元列表

#### <h4><a name="2.7.2.2属性"></a>2.7.2.2 属性</h4>

1、采控单元属性

树形列表中所选采控单元的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/cab41d126d40ae84665aff61fa1e5753.png)

图2-46采控单元属性窗口

2、采集组属性

树形列表中所选采集组的属性，可在此处进行查看和修改。

采集周期：针对被动相应数据生效，上位机采集周期；

保存周期：历史数据保存周期；

![](../images/helpdoc/PNG/96d07ea691709f7be850cb7a9e8a7152.png)

图2-47采集组属性窗口

3、控制组属性

树形列表中所选控制组的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/4d6d1b8569da6a72761d3ab72572ef6a.png)

图2-48控制组属性窗口

#### <h4><a name="2.7.2.3组包含项配置"></a>2.7.2.3 组包含项配置</h4>

1、采集组包含的采集项配置

左侧树形列表中选择要配置的采集组，在采控项配置列表中勾选包含的采集项；

![](../images/helpdoc/PNG/a51e4fc8d28a43c7e56b6da02247815a.png)

图2-49采集组包含采集项配置

显示级别：采集项显示级别，用户只能查看显示级别不小于自身数据显示级别的数据（见角色管理和用户管理）；

显示顺序：对应实时监控模块中实时数据表和历史查询模块中详细数据表中项的显示顺序（左到右、上到下顺序），未设置顺序的项将放在最后面显示；

实时曲线：实时曲线显示顺序，未设置则不显示曲线；

实时曲线颜色：双击单元格，选择曲线颜色；

历史曲线：历史曲线显示顺序，未设置则不显示曲线；

历史曲线颜色：双击单元格，选择曲线颜色；

![](../images/helpdoc/PNG/641416526058f9623ba9f08d33f2895c.png)

图2-50曲线颜色配置

2、控制组包含的控制项项配置

左侧树形列表中选择要配置的控制组，在采控项配置列表中勾选包含的控制项（读写类型为只写或者读写）；

显示级别：控制项显示级别，用户只能查看显示级别不小于自身数据显示级别的数据（见角色管理和用户管理）；

显示顺序：对应实时监控模块中控制列表中控制项的显示顺序；

![](../images/helpdoc/PNG/39d1bb641ff913d6787e400d36f1abd5.png)

图2-51控制组包含控制项配置

#### <h4><a name="2.7.2.4创建和删除采控单元"></a>2.7.2.4 创建和删除采控单元</h4>

1、创建采控单元

点击“添加采控单元”按钮，进行采集单元的创建。

协议名称：在下拉框中选择所属协议；

单元名称：单元名称；

单元描述：单元描述；

![](../images/helpdoc/PNG/839a6803a963fc053f40ea845af12021.png)

图2-52创建采控单元

2、删除采控单元

在左侧树形菜单中选中要删除的单元，右键→删除采控单元。

![](../images/helpdoc/PNG/d6485432ebdeb74a088dd2821bce98e9.png)

图2-53删除采控单元

#### <h4><a name="2.7.2.4创建和删除采控组"></a>2.7.2.4 创建和删除采控组</h4>

1、创建采控组

点击“添加采控组”按钮，进行采集组的创建。

协议名称：在下拉框中选择所属协议；

单元名称：在下拉框中选择所属单元；

组名称：组名称；

组类型：采集组或者控制组

采集周期：采集组填写

保存周期：采集组填写

组描述：组描述。

![](../images/helpdoc/PNG/b6c1f5d6ce9c2307d05a9d78ce25ecef.png)

图2-54创建采控组

2、删除采控组

在左侧树形菜单中选中要删除的组，右键→删除采控组。

![](../images/helpdoc/PNG/6759f27eb560bb42aaf2a0a10e26da7b.png)

图2-55删除采控组

### <h3><a name="2.7.3单元配置-报警单元"></a>2.7.3 单元配置-报警单元</h3>

在协议下面创建报警单元，并设置单元下包含的报警项及报警配置。

![](../images/helpdoc/PNG/4acad1074aaaa64a41d31ba7e3bcd6f8.png)

图2-56 报警单元

#### <h4><a name="2.7.3.1单元列表"></a>2.7.3.1 单元列表</h4>

第一层节点：设备类型，泵设备或管设备

第二层节点：协议；

第三层节点：报警单元；

#### <h4><a name="2.7.3.2单元属性"></a>2.7.3.2 单元属性</h4>

树形列表中所选报警单元的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/e6d1055a6b0410746cf650d1b0551288.png)

图2-57报警单元属性窗口

#### <h4><a name="2.7.3.3单元包含报警项配置"></a>2.7.3.3 单元包含报警项配置</h4>

左侧树形列表中选择要配置的报警，分别配置数据量、开关量、枚举量、通信状态报警项；

1、数据量报警项配置

勾选单元包含的数据量报警项，并设置

上限：报警上限；

下限：报警下限；

回差：值大于上限和回差的和或者小于下限和回差的差值则报警；

延时：延时时间内不重复报警和推送；

报警级别：正常、一级报警、二级报警、三级报警（一级为最紧急严重）；

报警使能：使能或者失效（失效则一律不报警）；

是否发送短信：报警发生时是否向用户发送短信（建议一级报警项设为是，其他为否，避免频繁发送）；

是否发送右键：报警发生时是否向用户发送邮件（建议一级报警项设为是，其他为否，避免频繁发送）；

![](../images/helpdoc/PNG/cbc1b0611016ae8ddc28a1dffd85caf0.png)

图2-58数据量报警项配置

2、开关量报警项配置

选中要设置报警的开关量数据，并设置

触发状态：开或者关触发报警；

延时：延时时间内不重复报警和推送；

报警级别：正常、一级报警、二级报警、三级报警（一级为最紧急严重）；

报警使能：使能或者失效（失效则一律不报警）；

是否发送短信：报警发生时是否向用户发送短信（建议一级报警项设为是，其他为否，避免频繁发送）；

是否发送右键：报警发生时是否向用户发送邮件（建议一级报警项设为是，其他为否，避免频繁发送）；

![](../images/helpdoc/PNG/22add54c3f7ccfb388b83e9a553943b8.png)

图2-59开关量报警项配置

3、枚举量报警项配置

勾选单元包含的枚举量报警项，并设置

延时：延时时间内不重复报警和推送；

报警级别：正常、一级报警、二级报警、三级报警（一级为最紧急严重）；

报警使能：使能或者失效（失效则一律不报警）；

是否发送短信：报警发生时是否向用户发送短信；

是否发送右键：报警发生时是否向用户发送邮件；

![](../images/helpdoc/PNG/aaf71821f99d845a2724b8480e5a8f44.png)

图2-60枚举量报警项配置

4、通信状态报警项配置

勾选单元包含的通信状态报警项，并设置

延时：延时时间内不重复报警和推送；

报警级别：正常、一级报警、二级报警、三级报警（一级为最紧急严重）；

报警使能：使能或者失效（失效则一律不报警）；

是否发送短信：报警发生时是否向用户发送短信；

是否发送右键：报警发生时是否向用户发送邮件；

![](../images/helpdoc/PNG/bdee38be419d2d9323afd93f23fbf090.png)

图2-61通信状态报警项配置

### <h3><a name="2.7.4实例配置-采控实例"></a>2.7.4 实例配置-采控实例</h3>

在采控单元中配置完采控单元后（确定采控项和地址配置），还需配置采控实例（读写一级解析时具体的协议）。

![](../images/helpdoc/PNG/9cd4be5f884194bf4c8a7cbaa40bc1f8.png)

图2-62采控实例配置

#### <h4><a name="2.7.4.1实例列表"></a>2.7.4.1 实例列表</h4>

第一层节点：设备类型，泵设备或管设备

第二层节点：采控实例；

第三层节点：采控实例配置的采控单元；

第四层节点：采控实例配置的采控单元下的采控组；

![](../images/helpdoc/PNG/ac92fd88fcf263057d5575abb6da849f.png)

图2-63采控实例列表

#### <h4><a name="2.7.4.2实例属性"></a>2.7.4.2 实例属性</h4>

树形列表中所选采控实例的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/33aecdf825d5317e98a0b82efbb24fdc.png)

图2-64采控实例属性窗口

#### <h4><a name="2.7.4.2创建和删除实例"></a>2.7.4.2 创建和删除实例</h4>

1、创建实例

点击“添加实例”按钮，进行创建。

实例名称：实例名称；

设备类型：泵设备或者管设备

采控单元：在下拉框中选择对应的采控单元；

采集协议类型：数据采集及解析具体协议，目前支持private-kd93（科台斯）、private-lq1000（灵旗）、modbus-tcp、modbus-rtu四种协议；

控制协议类型：设备控制具体协议，目前支持modbus-tcp、modbus-rtu两种协议；

注册包前缀：注册包设备上线时发送的信息，如没有则不填写；

注册包后缀：如没有则不填写；

心跳包前缀：用于判断设备连接状态，如没有则不填写；

心跳包后缀：如没有则不填写；

排序：实例排序序号，对应树形列表中实例显示顺序。

![](../images/helpdoc/PNG/b4048338211f20d0667ad95c5087c205.png)

图2-65创建采控实例

2、删除实例

在左侧树形菜单中选中要删除的实例，右键→删除采控实例。

![](../images/helpdoc/PNG/beb7f2a965a9b7df4b96a33577bda6db.png)

图2-66删除采控实例

### <h3><a name="2.7.5实例配置-报警实例"></a>2.7.5 实例配置-报警实例</h3>

在报警单元中配置完报警单元后，还需配置报警实例。

![](../images/helpdoc/PNG/c8f8bc1e17db46b20a8f90a760d25aa2.png)

图2-67报警实例配置

#### <h4><a name="2.7.5.1实例列表"></a>2.7.5.1 实例列表</h4>

第一层节点：设备类型，泵设备或管设备

第二层节点：报警实例；

第三层节点：报警实例配置的报警单元；

![](../images/helpdoc/PNG/41cff35b7a351d911740f346afdf8274.png)

图2-68报警实例列表

#### <h4><a name="2.7.5.2实例属性"></a>2.7.5.2 实例属性</h4>

树形列表中所选报警实例的属性，可在此处进行查看和修改。

![](../images/helpdoc/PNG/15c37ce827ad503e2f1770e13f3549d4.png)

图2-69采控实例属性窗口

#### <h4><a name="2.7.5.3创建和删除实例"></a>2.7.5.3 创建和删除实例</h4>

1、创建实例

点击“添加实例”按钮，进行创建。

实例名称：实例名称；

设备类型：泵设备或者管设备

报警单元：在下拉框中选择对应的报警单元；

排序：实例排序序号，对应树形列表中实例显示顺序。

![](../images/helpdoc/PNG/d2fa793fac2467a0dea9de42d93a53e9.png)

图2-70创建报警实例

2、删除实例

在左侧树形菜单中选中要删除的实例，右键→删除报警实例。

![](../images/helpdoc/PNG/f5a96a8900d34354505276cd2e3c3890.png)

图2-71删除报警实例

### <h3><a name="2.7.6实例配置-短信实例"></a>2.7.6 实例配置-短信实例</h3>

配置短信设备实例

实例名称：实例名称

采集协议类型：目前支持private-lq1000协议

控制协议烈性：目前支持private-lq1000协议

![](../images/helpdoc/PNG/ce6e39fea2bdb33a43c78f250a8e1341.png)

图2-72短信实例

## <h2><a name="2.8设备管理"></a>2.8 设备管理</h2>

### <h3><a name="2.8.1泵设备"></a>2.8.1 泵设备</h3>

泵设备共包括隔膜泵、螺杆泵、直线电机泵、电潜泵、射流泵五种，不同设备在各自的标签页进行数据维护。

1、在设备列表处进行设备主要信息的录入及维护：

单位名称：设备所属单位，和组织树中对应；

井名：井名；

应用场景：煤层气井或者油井；

采控实例：对应驱动配置/实例配置/采控实例中配置的实例；

报警实例：对应驱动配置/实例配置/报警实例中配置的实例；

注册包ID：上位机通过注册包ID和设备从地址区分设备；

设备从地址：上位机通过注册包ID和设备从地址区分设备；

排序编号：设备显示顺序；

2、设备附加信息配置：录入设备附加信息，如出厂编号、规格型号、生产日期、发货日期、投产日期、控制柜型号等；

3、辅件设备配置：在辅件设备列表中，勾选左侧设备表中所选设备具有的辅件设备。

辅件设备的维护见“2.8.3辅件设备”部分。

注意：当需要修改设备名称时，修改后，不要点击“保存”按钮，而是点击“修改设备名称”按钮。

![](../images/helpdoc/PNG/a98141f97633156fc376f4a7b7599830.png)

图2-73 泵设备管理

### <h3><a name="2.8.2管设备"></a>2.8.2 管设备</h3>

管设备共包括加热管、采水管、集输管三种，不同设备在各自的标签页进行数据维护。

1、在设备列表处进行设备主要信息的录入及维护：

单位名称：设备所属单位，和组织树中对应；

井名：井名；

应用场景：煤层气井或者油井；

采控实例：对应驱动配置/实例配置/采控实例中配置的实例；

报警实例：对应驱动配置/实例配置/报警实例中配置的实例；

注册包ID：上位机通过注册包ID和设备从地址区分设备；

设备从地址：上位机通过注册包ID和设备从地址区分设备；

排序编号：设备显示顺序；

2、设备附加信息配置：录入设备附加信息，如出厂编号、规格型号、生产日期、发货日期、投产日期、控制柜型号、管体长度等；

3、辅件设备配置：在辅件设备列表中，勾选左侧设备表中所选设备具有的辅件设备。

辅件设备的维护见“2.8.3辅件设备”部分。

注意：当需要修改设备名称时，修改后，不要点击“保存”按钮，而是点击“修改设备名称”按钮。

![](../images/helpdoc/PNG/5e7c07fc30cf558e6ef66cbd35dd0828.png)

图2-74 管设备管理

### <h3><a name="2.8.3辅件设备"></a>2.8.3 辅件设备</h3>

辅件设备管理

设备名称：设备名称；

类型：泵辅件或者管辅件；

规格型号：规格型号；

备注：备注信息；

排序编号：设备显示顺序；

注意：当需要修改设备名称时，修改后，不要点击“保存”按钮，而是点击“修改设备名称”按钮。

![](../images/helpdoc/PNG/ed486df34c6409138ef911b750cdaa29.png)

图2-75 辅件设备管理

## <h2><a name="2.9系统配置"></a>2.9 系统配置</h2>

### <h3><a name="2.9.1模块配置"></a>2.9.1 模块配置</h3>

配置模块信息。

![](../images/helpdoc/PNG/4efeeb20cbcf781ea9dba10a0e50d7c6.png)

图2-76 模块配置

### <h3><a name="2.9.2字典配置"></a>2.9.2 字典配置</h3>

对各模块显示的字段进行管理，主要修改字段名称、显示顺序、是否显示等。如“泵设备实时概览”（即实时监控模块中泵设备概览表）中显示哪些内容，可点击对应字典项，并在里面进行勾选。

![](../images/helpdoc/PNG/2a8eeec5ca9b220fb04c525c81ed7ebe.png)

图2-77 字典配置

双击某一项，进行该数据项修改：

![](../images/helpdoc/PNG/34124726bbf8b1857f3341bdebcd3876.png)

图2-78 字典数据项配置

### <h3><a name="2.9.3报警颜色"></a>2.9.3 报警颜色</h3>

设置概览数据表、详细数据表以及状态统计中各级别报警的提示颜色。

![](../images/helpdoc/PNG/1b28c66154c24fc577bb107ac2438993.png)

图2-79 报警配置
